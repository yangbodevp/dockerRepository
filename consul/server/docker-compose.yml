version: '3'
services:
  server_1:
    container_name: consul_server_1        # 指定容器的名称
    image: consul                   # 指定镜像和版本
    restart: always
    privileged: true
    ports:
      - "8510:8500"
    environment:
      CONSUL_BIND_INTERFACE: eth0      
    volumes:
      - "/my/consul/data/server1:/consul/data"           # 挂载数据目录
      - "/my/consul/conf/server1:/consul/config"      # 挂载配置文件目录
    command: agent -server -bootstrap-expect=3 -ui -node=consul_server_1 -client='0.0.0.0' -data-dir /consul/data -config-dir /consul/config -datacenter=dc01
